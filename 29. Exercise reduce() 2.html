<script>
    /*
  Create a function called getPersonWithMostFriendsByName that returns the name of the person who has the most number of friends with the given name.

Example:

    getPersonWithMostFriendsByName([
     {
      name: "Joe", 
      friends: [
    {name: "Susan", age: 12}, 
    {name: "Jane", age: 43}, 
    {name: "Susan", age: 33}
       ]
        }, 
     {
      name: "Liz", 
      friends: [
    {name: "Mila", age: 12}, 
    {name: "Susan", age: 43}, 
    {name: "Jane", age: 33}
       ]
        },
    {
      name: "Mike", 
      friends: [
    {name: "Susan", age: 12}, 
    {name: "Susan", age: 43}, 
    {name: "Susan", age: 33}
       ]
        }
    ], "Susan"); // should return “Mike”, since he has most number of friends named Susan
    */

    // create new array with objects including only name and custom friend name count

    function getPersonWithMostFriendsByName (people, friendName) {

        let filteredFriends = people.map(function(person){ 

            return {

                name: person.name,

                count: person.friends.filter(function(friend){

                    return friend.name === friendName;

                }).length
            }
        })
        

    // calculating which person has most friends with custom friend name

         let max = filteredFriends.reduce(function(aggr, obj){

    if(aggr === undefined){    // this is for selection of first element instead of undefined

        return obj
    }

    if(obj.count > aggr.count){  

        return obj

    } return aggr

         }, undefined);

         return max.name
    }


alert(JSON.stringify(getPersonWithMostFriendsByName([
     {
      name: "Joe", 
      friends: [
    {name: "Susan", age: 12}, 
    {name: "Jane", age: 43}, 
    {name: "Susan", age: 33}
       ]
        }, 
     {
      name: "Liz", 
      friends: [
    {name: "Mila", age: 12}, 
    {name: "Susan", age: 43}, 
    {name: "Jane", age: 33}
       ]
        },
    {
      name: "Mike", 
      friends: [
    {name: "Susan", age: 12}, 
    {name: "Susan", age: 43}, 
    {name: "Susan", age: 33}
       ]
        }
    ], "Susan")))

</script>