<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>78. setTimeout </title>
  
  
</head>

<body>
    <input type="text" placeholder="Search..."/>
    <div id="root"></div>

<script>
// console.log("start");

// const id = setTimeout(function(){
//     console.log("yay");
// }, 0)

// clearTimeout(id);

// // for(let i = 0; i < 5000; i++){
// //     console.log("waiting");
// // }

// setTimeout(function(){
//     console.log("ok");
// }, 0)

// console.log("end")

let list = [
    "Joe",
    "Rob",
    "Mike",
    "Lisa",
    "Zara"
];

let searchText = "";

const input =  document.querySelector("input");
input.addEventListener("keyup", (e) => {
    searchText = e.target.value;
    refresh()
})
let id;
function refresh() {
    if(id !== undefined) {
        clearTimeout(id);
    }
  id = setTimeout(() => {
        render();
    }, 1000)
}
const root = document.querySelector("#root");

function render() {
    root.innerHTML = ""


list.filter((name) => {
    return name.indexOf(searchText) !== -1;
}).map( function (name) {
	const div = document.createElement("div");
	div.innerText = name;
	return div;
}).forEach(function(el){
root.appendChild(el);
})

}

render();



</script>
</body>
</html>